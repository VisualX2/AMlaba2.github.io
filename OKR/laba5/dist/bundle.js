(()=>{"use strict";function t(t){let e=" ";return t.forEach((t=>{e+='<div class = "card border-secondary mb-3" style = "max-width: 350px;">',e+="<div class = 'card-body'><h5 class = 'card-title'>"+t.productName+"</h5></div>",e+="<img src = '"+t.images+"' onclick=\"return location.href = '#catalog/"+t.id+"'\" class='d-block user-select-none' width='100%' height='200' aria-label='Placeholder: Image cap' focusable='false' role='img' preserveAspectRatio='xMidYMid slice' viewBox='0 0 318 180' style='font-size:1.125rem;text-anchor:middle'>",e+="<div class = 'card-body'><p class='card-text'>"+t.productDescription+"</p></div>",e+="<div class = 'card-body'><h2>"+t.price+" грн.</h2><p>"+t.weight+" г.</p><h6></div>",e+="<button type='button' class='btn btn-danger btn-add-to-cart' tovarNum='"+t.id+"'>В Корзину</button></div>"})),e}function e(){let t='\n    <div class="cart">\n    <div class="card border-primary mb-3">\n      <div class="card-header">Header</div>\n      <div class="order-display__order">\n    ',n=JSON.parse(sessionStorage.getItem("productList"))||[],a=JSON.parse(localStorage.getItem("cart"))||[];return n.forEach((e=>{0!==a[e.id-1]&&(t+='<div class="order__main-info"><div class="order__logo"><img src="'+e.images+'" width="150px" alt=""></div>\n            <div class="order__description">\n            <div class="order__information">\n            \n            <h3>'+e.productName+"</h3>\n            \n            <p>"+e.productDescription+'</p>\n            <div class="order__size">\n                Стандарт\n            </div>\n            </div>\n            <div class="order__buy" id="pizzas.5">\n                <div class="order__price">'+e.price+'</div>\n                <div class="order__amount-plus-minus">\n                <button class="order__amount-minus kek" tovarCount = "'+e.id+'">-</button>\n                <div class="order__amount">'+a[e.id-1]+'\n                </div>\n                <button class="order__amount-plus kuk"tovarCount = "'+e.id+'">+</button>\n                </div>\n            </div>\n        </div></div>')})),t+='</div></div><div><form class="order__registration-blank">\n        <h2>Оформление заказа</h2>\n        <div class="form_cart">\n          \n            <input type="text" class="form-control" id="name" placeholder="Имя" required pattern="([A-Za-z]|[А-Яа-я]|[ ]){2,20}">\n            <input type="text" class="form-control" id="number" placeholder="Телефон (пр. 0964772430)" required pattern="[0]{1}[0-9]{9}">\n            <input type="text" class="form-control" id="email" placeholder="E-mail (example@gmail.com)" required pattern="([A-Za-z]|[0-9]){4,20}[@]{1}[a-z]{3,10}[.]{1}[a-z]{2,5}">\n  \n      \n  \n            <input type="text" class="form-control" id="city" placeholder="Город" required pattern="([A-Za-z]|[А-Яа-я]|[А-Яа-а]|[ ]){4,20}">\n            <input type="text" class="form-control" id="street" placeholder="Улица" required pattern="([A-Za-z]|[А-Яа-я]|[1-9]|[ ]){4,20}">\n            <input type="text" class="form-control" id="house" placeholder="Дом" required pattern="[1-9]{1,3}">\n            <input type="text" class="form-control" id="flat" placeholder="Квартира (необяз.)" pattern="[1-9]{1,4}">\n                <input type="text" class="form-control" id="entrance" placeholder="Подъезд (необяз.)" pattern="[1-9]{1,2}">\n  \n        \n                <input type="text" class="form-control" id="date" placeholder="Дата (дд.мм)" required pattern="[0-9]{2}[.]{1}[0-9]{2}">\n                <input type="text" class="form-control" id="time" placeholder="Время (чч:мм)" required pattern="[0-9]{2}[:]{1}[0-9]{2}">\n  \n        </div>\n        <div class="_payment">\n            <h2 class="pay-title">Оплата</h2>\n            <select class="custom-select" id = "payment_select">\n            <option>Наличные</option>\n            <option>Карта</option>\n            </select>\n        </div>\n        <div ><button type="submit" class="btn btn-danger">Заказать</button></div>\n  \n    </form></div></div>',document.querySelectorAll(".kek").forEach((t=>{t.addEventListener("click",(()=>{console.log("1"),function(t){let n=JSON.parse(localStorage.getItem("cart"))||[];n[parseInt(t)-1]-=1,localStorage.setItem("cart",JSON.stringify(n)),i(),document.getElementById("root").innerHTML=e()}(t.getAttribute("tovarCount"))}))})),document.querySelectorAll(".kuk").forEach((t=>{t.addEventListener("click",(()=>{!function(t){let n=JSON.parse(localStorage.getItem("cart"))||[];n[parseInt(t)-1]+=1,localStorage.setItem("cart",JSON.stringify(n)),i(),document.getElementById("root").innerHTML=e()}(t.getAttribute("tovarCount")),console.log(t.getAttribute("tovarCount"))}))})),t}function n(t){let e=JSON.parse(sessionStorage.getItem("productList"))||[],n=[];null===localStorage.getItem("cart")?e.forEach((()=>{n.push(0)})):n=JSON.parse(localStorage.getItem("cart"))||[],n[t-1]+=1,localStorage.setItem("cart",JSON.stringify(n)),i()}function i(){let t=[];t=JSON.parse(localStorage.getItem("cart"))||[];let e=t.reduce(((t,e)=>t+e),0);document.getElementById("cart-count").innerHTML=e}function a(){const i=document.getElementById("root");if(o(window.location.hash)&&"#catalog"===window.location.hash.split("/")[0])i.innerHTML=function(t){t=t.replace(/\D/g,"");let e=JSON.parse(sessionStorage.getItem("productList"))||[],n=e[t-1];void 0===e[t-1]&&(window.location.hash="#");let i="";return i+='<div style = "display: grid; grid-template-columns: repeat(2, 1fr); grid-column-gap: 10px;"><div><img style = "max-width: 400px;" src = \''+n.images+"' class='d-block user-select-none' style = \"margin-left: 10px; min-width: 400px;\"  aria-label='Placeholder: Image cap' focusable='false' role='img' preserveAspectRatio='xMidYMid slice' viewBox='0 0 318 180' style='font-size:1.125rem;text-anchor:middle'></div><div><h1>"+n.productName+"</h1><p>"+n.productDescription+"</p><h4>"+n.weight+" гр</h4><h3>"+n.price+" грн</h3><button type='button' class='btn btn-danger btn-add-to-cart' tovarNum='"+n.id+"'>В Корзину</button></div></div>",i}(window.location.hash),document.querySelectorAll(".btn-add-to-cart").forEach((t=>{t.addEventListener("click",(()=>{n(t.getAttribute("tovarNum"))}))}));else if(o(window.location.hash)||"#catalog"!==window.location.hash.split("/")[0])if(o(window.location.hash)&&"#actions"===window.location.hash.split("/")[0])i.innerHTML=function(t){t=t.replace(/\D/g,"");let e=JSON.parse(sessionStorage.getItem("actionList"))||[],n=e[t-1];void 0===e[t-1]&&(window.location.hash="#");let i="";return i+='<div style = "display: grid; grid-template-columns: repeat(2, 1fr); grid-column-gap: 10px;"><div><img style = "max-width: 400px;" src = \''+n.images+"' class='d-block user-select-none' style = \"margin-left: 10px; min-width: 400px;\"  aria-label='Placeholder: Image cap' focusable='false' role='img' preserveAspectRatio='xMidYMid slice' viewBox='0 0 318 180' style='font-size:1.125rem;text-anchor:middle'></div><div><h1>"+n.actionName+"</h1><p>"+n.actionDescription+"</p></div></div>",i}(window.location.hash);else if(""===window.location.hash||"#"===window.location.hash)i.innerHTML=function(){let t=JSON.parse(sessionStorage.getItem("productList"))||[],e=JSON.parse(sessionStorage.getItem("actionList"))||[],n='\n<h1>MAIN</h1>\n<div class = "jumbotron">\n<h1>Actions</h1>\n<div id = "actions" class = "pizzas_category">\n';return e.forEach((t=>{n+='<div class = "card border-secondary mb-3" style = "width: 350px;">',n+="<div class = 'card-body'><h5 class = 'card-title'>"+t.actionName+"</h5></div>",n+="<img src = '"+t.images+"' onclick=\"return location.href = '#actions/"+t.id+"'\" class='d-block user-select-none' width='100%' height='200' aria-label='Placeholder: Image cap' focusable='false' role='img' preserveAspectRatio='xMidYMid slice' viewBox='0 0 318 180' style='font-size:1.125rem;text-anchor:middle'>",n+="<div class = 'card-body'><p class='card-text'>"+t.actionDescription+"</p></div>",n+="<button type='button' class='btn btn-danger' onclick=\"return location.href = '#actions/"+t.id+"'\">Details</button></div>"})),n+='</div>\n<h1>Best pizza</h1>\n<div id = "best_pizza" class = "pizzas_category">\n',n+=function(t){let e=" ";return t.forEach((t=>{e+='<div class = "card border-secondary mb-3" style = "width: 350px;">',e+="<div class = 'card-body'><h5 class = 'card-title'>"+t.productName+"</h5></div>",e+="<img src = '"+t.images+"' onclick=\"return location.href = '#catalog/"+t.id+"'\" class='d-block user-select-none' width='100%' height='200' aria-label='Placeholder: Image cap' focusable='false' role='img' preserveAspectRatio='xMidYMid slice' viewBox='0 0 318 180' style='font-size:1.125rem;text-anchor:middle'>",e+="<div class = 'card-body'><p class='card-text'>"+t.productDescription+"</p></div>",e+="<div class = 'card-body'><h2>"+t.price+" грн.</h2><p>"+t.weight+" г.</p><h6></div>",e+="<button type='button' class='btn btn-danger btn-add-to-cart' tovarNum='"+t.id+"'>В Корзину</button></div>"})),e}(t.filter((t=>1==t.recommended))||[]),n}(),document.querySelectorAll(".btn-add-to-cart").forEach((t=>{t.addEventListener("click",(()=>{n(t.getAttribute("tovarNum"))}))}));else if(o(window.location.hash)||"#actions"!==window.location.hash.split("/")[0]){if("#cart"===window.location.hash)if(null===localStorage.getItem("cart"))window.location.hash="#";else{i.innerHTML=e();const t=document.getElementsByTagName("form")[0];t.addEventListener("submit",(function(e){t.checkValidity()?function(){let t={cart:localStorage.getItem("cart"),name:document.getElementById("name").value,number:document.getElementById("number").value,email:document.getElementById("email").value,city:document.getElementById("city").value,street:document.getElementById("street").value,house:document.getElementById("house").value,flat:document.getElementById("flat").value,entrance:document.getElementById("entrance").value,date:document.getElementById("date").value,time:document.getElementById("time").value,payment_select:document.getElementById("payment_select").value};!async function(t){await fetch("https://my-json-server.typicode.com/VisualX2/OKRLABA4/offers",{method:"POST",body:JSON.stringify(t)}).then((t=>{if(t.ok)return console.log("yay"),t.json();window.location.hash="error"}))}(t),window.location.hash="#order",document.getElementById("root").innerHTML=function(t){let e='\n    <div class="cart">\n    <div class="card border-primary mb-3">\n      <div class="card-header">Header</div>\n      <div class="order-display__order">\n    ',n=JSON.parse(sessionStorage.getItem("productList"))||[],i=JSON.parse(localStorage.getItem("cart"))||[];return n.forEach((t=>{0!==i[t.id-1]&&(e+='<div class="order__main-info"><div class="order__logo"><img src="'+t.images+'" width="150px" alt=""></div>\n            <div class="order__description">\n            <div class="order__information">\n            \n            <h3>'+t.productName+"</h3>\n            \n            <p>"+t.productDescription+'</p>\n            <div class="order__size">\n                Стандарт\n            </div>\n            </div>\n            <div class="order__buy" id="pizzas.5">\n                <div class="order__price">'+t.price+'</div>\n                <div class="order__amount-plus-minus">\n                <div class="order__amount">'+i[t.id-1]+"\n                </div>\n                </div>\n            </div>\n        </div></div>")})),e+="</div></div><div>\n    <p>Name:"+t.name+"</p>\n    <p>Number:"+t.number+"</p>\n    <p>Email:"+t.email+"</p>\n    <p>City:"+t.city+"</p>\n    <p>Street:"+t.street+"</p>\n    <p>House:"+t.house+"</p>\n    <p>Flat:"+t.flat+"</p>\n    <p>Entrance:"+t.entrance+"</p>\n    <p>Date:"+t.date+"</p>\n    <p>Time:"+t.time+"</p>\n    <p>Payment:"+t.payment_select+"</p>\n    </div></div>",e}(t),localStorage.clear()}():e.preventDefault()}))}}else i.innerHTML=function(){let t=JSON.parse(sessionStorage.getItem("actionList"))||[],e='\n<h1>Actions.</h1>\n<div class = "jumbotron">\n';return t.forEach((t=>{e+='\n        <div id = "action" class = "actions_main__element">\n        <div class="actions_logo"><img style = "max-width: 400px;" src="'+t.images+'" alt=""></div>\n        <div class="actions_description">\n                    <p>'+t.date+"</p>\n                    <p><em>"+t.actionName+"</em></p>\n                    <p>"+t.actionDescription+'</p>\n                    \n                    <button type="submit" class="btn btn-danger" onclick="return location.href = \'#actions/'+t.id+"'\">Детали</button>\n                        \n                    \n                </div>\n        </div>\n        "})),e+="</div>",e}();else i.innerHTML=function(){let e=JSON.parse(sessionStorage.getItem("productList"))||[],n='\n<h1>Product Catalog.</h1>\n<div class = "jumbotron">\n<h1>Basic pizza</h1>\n<div id = "first_category" class = "pizzas_category"">\n';return n+=t(e.filter((t=>1==t.categoryId))||[]),n+='</div>\n<h1>Classic pizza</h1>\n<div id = "second_category" class = "pizzas_category">\n',n+=t(e.filter((t=>2==t.categoryId))||[]),n+='</div>\n<h1>Delux pizza</h1>\n<div id = "third_category" class = "pizzas_category">\n',n+=t(e.filter((t=>3==t.categoryId))||[]),n+='</div>\n<h1>Snacks</h1>\n<div id = "fourth_category" class = "pizzas_category">\n',n+=t(e.filter((t=>4==t.categoryId))||[]),n+='</div>\n<h1>Drinks</h1>\n<div id = "fifth_category" class = "pizzas_category">\n',n+=t(e.filter((t=>5==t.categoryId))||[]),n}(),document.querySelectorAll(".btn-add-to-cart").forEach((t=>{t.addEventListener("click",(()=>{n(t.getAttribute("tovarNum"))}))}))}function o(t){var e=t.match(/[0-9]$/);return e?e[0]:""}window.onload=()=>{null===sessionStorage.getItem("productList")||null===sessionStorage.getItem("actionList")?async function(){let t=await fetch("https://my-json-server.typicode.com/VisualX2/OKRLABA4/products").then((t=>t.json()));t=JSON.stringify(t),sessionStorage.setItem("productList",t);let e=await fetch("https://my-json-server.typicode.com/VisualX2/OKRLABA4/actions").then((t=>t.json()));e=JSON.stringify(e),sessionStorage.setItem("actionList",e),window.location.reload()}():async function(){let t=await fetch("https://my-json-server.typicode.com/VisualX2/OKRLABA4/products").then((t=>t.json()));t=JSON.stringify(t),sessionStorage.setItem("productList",t);let e=await fetch("https://my-json-server.typicode.com/VisualX2/OKRLABA4/actions").then((t=>t.json()));e=JSON.stringify(e),sessionStorage.setItem("actionList",e)}(),i(),a()},window.onpopstate=()=>{i(),a()},document.querySelector(".button-cart").addEventListener("click",(()=>{window.location.href="#cart"}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91d3UyLy4vc2NyaXB0cy9jYXRhbG9nLmpzIiwid2VicGFjazovL3V3dTIvLi9zY3JpcHRzL2NhcnQuanMiLCJ3ZWJwYWNrOi8vdXd1Mi8uL3NjcmlwdHMvYXBwLmpzIiwid2VicGFjazovL3V3dTIvLi9zY3JpcHRzL2RldGFpbGVkUGl6emEuanMiLCJ3ZWJwYWNrOi8vdXd1Mi8uL3NjcmlwdHMvZGV0YWlsZWRBY3Rpb24uanMiLCJ3ZWJwYWNrOi8vdXd1Mi8uL3NjcmlwdHMvbWFpbi5qcyIsIndlYnBhY2s6Ly91d3UyLy4vc2NyaXB0cy9hY3Rpb25zLmpzIiwid2VicGFjazovL3V3dTIvLi9zY3JpcHRzL2dldGRhdGEuanMiXSwibmFtZXMiOlsiYnVpbGRfY2F0ZWdvcnkiLCJ1d3UiLCJjYXRhbG9nIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJwcm9kdWN0TmFtZSIsImltYWdlcyIsImlkIiwicHJvZHVjdERlc2NyaXB0aW9uIiwicHJpY2UiLCJ3ZWlnaHQiLCJidWlsZF9jYXJ0IiwiY2FydCIsImJhc2UiLCJKU09OIiwicGFyc2UiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJhcnJheU51bSIsImxvY2FsU3RvcmFnZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIml0ZW0iLCJhZGRFdmVudExpc3RlbmVyIiwiY29uc29sZSIsImxvZyIsInBhcnNlSW50Iiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInVwZGF0ZUNhcnRDb3VudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwiZGVjcmVhc2UiLCJnZXRBdHRyaWJ1dGUiLCJpbmNyZWFzZSIsImFkZF90b19jYXJ0IiwicHVzaCIsImNvdW50IiwicmVkdWNlIiwiYSIsImIiLCJyb3V0ZSIsInJvb3REaXYiLCJ0ZXN0QUJJbnQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhhc2giLCJzcGxpdCIsImxlbCIsInJlcGxhY2UiLCJuZWVkZWQiLCJhY3Rpb25OYW1lIiwiYWN0aW9uRGVzY3JpcHRpb24iLCJiYXNlbWEiLCJiYXNlYWNtYSIsIm1haW4iLCJidWlsZF9jYXRlZ29yeV9tYWluIiwiZmlsdGVyIiwicmVjb21tZW5kZWQiLCJmb3JtIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJldmVudCIsImNoZWNrVmFsaWRpdHkiLCJvcmRlciIsIm5hbWUiLCJ2YWx1ZSIsIm51bWJlciIsImVtYWlsIiwiY2l0eSIsInN0cmVldCIsImhvdXNlIiwiZmxhdCIsImVudHJhbmNlIiwiZGF0ZSIsInRpbWUiLCJwYXltZW50X3NlbGVjdCIsImFzeW5jIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwidGhlbiIsInJlc3BvbnNlIiwib2siLCJqc29uIiwic2V0RGF0YSIsIm9yZGVyQ3JlYXRlZCIsImNsZWFyIiwicHJldmVudERlZmF1bHQiLCJiYXNlYWN0IiwiYWN0aW9ucyIsImNhdGVnb3J5SWQiLCJzdHJpbmciLCJtYXRjaCIsIm9ubG9hZCIsInByb2R1Y3RzIiwicmVsb2FkIiwiZ2V0RGF0YUNhdGFsb2ciLCJnZXREYXRhQ2F0YWxvZ19XUiIsIm9ucG9wc3RhdGUiLCJxdWVyeVNlbGVjdG9yIiwiaHJlZiJdLCJtYXBwaW5ncyI6Im1CQWtDQSxTQUFTQSxFQUFlQyxHQUNwQixJQUFJQyxFQUFVLElBWWQsT0FYQUQsRUFBSUUsU0FBUUMsSUFDUkYsR0FBVyx5RUFFWEEsR0FBVyxxREFBMkRFLEVBQVFDLFlBQWMsY0FDNUZILEdBQVcsZUFBa0JFLEVBQVFFLE9BQVMsZ0RBQW1ERixFQUFRRyxHQUFLLDRPQUM5R0wsR0FBVyxpREFBdURFLEVBQVFJLG1CQUFxQixhQUMvRk4sR0FBVyxnQ0FBb0NFLEVBQVFLLE1BQVEsZ0JBQWtCTCxFQUFRTSxPQUFTLG9CQUNsR1IsR0FBVywwRUFBaUZFLEVBQVFHLEdBQUssZ0NBSXRHTCxFQy9DSixTQUFTUyxJQUNaLElBQUlDLEVBQU8sb0tBTVBDLEVBQU9DLEtBQUtDLE1BQU1DLGVBQWVDLFFBQVEsaUJBQW1CLEdBQzVEQyxFQUFXSixLQUFLQyxNQUFNSSxh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RCxPQUFTLEtLV2lDLE9BQTFDN0UsZUFBZUMsUUFBUSxnQkFBb0UsT0FBekNELGVBQWVDLFFBQVEsY0FsQnpFMkQsaUJBQ0gsSUFBSWtCLFFBQWlCakIsTUFBTSxrRUFBa0VHLE1BQUtDLEdBQVlBLEVBQVNFLFNBQ3ZIVyxFQUFXaEYsS0FBS2MsVUFBVWtFLEdBQzFCOUUsZUFBZVcsUUFBUSxjQUFlbUUsR0FDdEMsSUFBSUwsUUFBZ0JaLE1BQU0saUVBQWlFRyxNQUFLQyxHQUFZQSxFQUFTRSxTQUNySE0sRUFBVTNFLEtBQUtjLFVBQVU2RCxHQUN6QnpFLGVBQWVXLFFBQVEsYUFBYzhELEdBQ3JDN0MsT0FBT0MsU0FBU2tELFNBWVpDLEdBVlJwQixpQkFDSSxJQUFJa0IsUUFBaUJqQixNQUFNLGtFQUFrRUcsTUFBS0MsR0FBWUEsRUFBU0UsU0FDdkhXLEVBQVdoRixLQUFLYyxVQUFVa0UsR0FDMUI5RSxlQUFlVyxRQUFRLGNBQWVtRSxHQUN0QyxJQUFJTCxRQUFnQlosTUFBTSxpRUFBaUVHLE1BQUtDLEdBQVlBLEVBQVNFLFNBQ3JITSxFQUFVM0UsS0FBS2MsVUFBVTZELEdBQ3pCekUsZUFBZVcsUUFBUSxhQUFjOEQsR0FRakNRLEdMZEosSUFDQXhELEtBRUpHLE9BQU9zRCxXQUFhLEtBQ2hCLElBQ0F6RCxLQUdKckIsU0FBUytFLGNBQWMsZ0JBQWdCNUUsaUJBQWlCLFNBQVMsS0FDN0RxQixPQUFPQyxTQUFTdUQsS0FBTyxZIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQ2F0YWxvZygpIHtcbiAgICBsZXQgYmFzZSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncHJvZHVjdExpc3QnKSkgfHwgW107XG4gICAgbGV0IGNhdGFsb2cgPSBgXG48aDE+UHJvZHVjdCBDYXRhbG9nLjwvaDE+XG48ZGl2IGNsYXNzID0gXCJqdW1ib3Ryb25cIj5cbjxoMT5CYXNpYyBwaXp6YTwvaDE+XG48ZGl2IGlkID0gXCJmaXJzdF9jYXRlZ29yeVwiIGNsYXNzID0gXCJwaXp6YXNfY2F0ZWdvcnlcIlwiPlxuYDtcbiAgICBjYXRhbG9nICs9IGJ1aWxkX2NhdGVnb3J5KGJhc2UuZmlsdGVyKGVsZW1lbnQgPT4gZWxlbWVudC5jYXRlZ29yeUlkID09IDEpIHx8IFtdLCBjYXRhbG9nKTtcblxuICAgIGNhdGFsb2cgKz0gYDwvZGl2PlxuPGgxPkNsYXNzaWMgcGl6emE8L2gxPlxuPGRpdiBpZCA9IFwic2Vjb25kX2NhdGVnb3J5XCIgY2xhc3MgPSBcInBpenphc19jYXRlZ29yeVwiPlxuYDtcbiAgICBjYXRhbG9nICs9IGJ1aWxkX2NhdGVnb3J5KGJhc2UuZmlsdGVyKGVsZW1lbnQgPT4gZWxlbWVudC5jYXRlZ29yeUlkID09IDIpIHx8IFtdLCBjYXRhbG9nKTtcbiAgICBjYXRhbG9nICs9IGA8L2Rpdj5cbjxoMT5EZWx1eCBwaXp6YTwvaDE+XG48ZGl2IGlkID0gXCJ0aGlyZF9jYXRlZ29yeVwiIGNsYXNzID0gXCJwaXp6YXNfY2F0ZWdvcnlcIj5cbmA7XG4gICAgY2F0YWxvZyArPSBidWlsZF9jYXRlZ29yeShiYXNlLmZpbHRlcihlbGVtZW50ID0+IGVsZW1lbnQuY2F0ZWdvcnlJZCA9PSAzKSB8fCBbXSwgY2F0YWxvZyk7XG4gICAgY2F0YWxvZyArPSBgPC9kaXY+XG48aDE+U25hY2tzPC9oMT5cbjxkaXYgaWQgPSBcImZvdXJ0aF9jYXRlZ29yeVwiIGNsYXNzID0gXCJwaXp6YXNfY2F0ZWdvcnlcIj5cbmA7XG4gICAgY2F0YWxvZyArPSBidWlsZF9jYXRlZ29yeShiYXNlLmZpbHRlcihlbGVtZW50ID0+IGVsZW1lbnQuY2F0ZWdvcnlJZCA9PSA0KSB8fCBbXSwgY2F0YWxvZyk7XG4gICAgY2F0YWxvZyArPSBgPC9kaXY+XG48aDE+RHJpbmtzPC9oMT5cbjxkaXYgaWQgPSBcImZpZnRoX2NhdGVnb3J5XCIgY2xhc3MgPSBcInBpenphc19jYXRlZ29yeVwiPlxuYDtcbiAgICBjYXRhbG9nICs9IGJ1aWxkX2NhdGVnb3J5KGJhc2UuZmlsdGVyKGVsZW1lbnQgPT4gZWxlbWVudC5jYXRlZ29yeUlkID09IDUpIHx8IFtdLCBjYXRhbG9nKTtcblxuICAgIHJldHVybiBjYXRhbG9nO1xufVxuZnVuY3Rpb24gYnVpbGRfY2F0ZWdvcnkodXd1KSB7XG4gICAgbGV0IGNhdGFsb2cgPSAnICc7XG4gICAgdXd1LmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIGNhdGFsb2cgKz0gJzxkaXYgY2xhc3MgPSBcImNhcmQgYm9yZGVyLXNlY29uZGFyeSBtYi0zXCIgc3R5bGUgPSBcIm1heC13aWR0aDogMzUwcHg7XCI+JztcblxuICAgICAgICBjYXRhbG9nICs9ICc8ZGl2IGNsYXNzID0gXFwnY2FyZC1ib2R5XFwnPjxoNSBjbGFzcyA9IFxcJ2NhcmQtdGl0bGVcXCc+JyArIGVsZW1lbnQucHJvZHVjdE5hbWUgKyAnPC9oNT48L2Rpdj4nO1xuICAgICAgICBjYXRhbG9nICs9ICc8aW1nIHNyYyA9IFxcJycgKyBlbGVtZW50LmltYWdlcyArICdcXCcgb25jbGljaz1cInJldHVybiBsb2NhdGlvbi5ocmVmID0gXFwnI2NhdGFsb2cvJyArIGVsZW1lbnQuaWQgKyAnXFwnXCIgY2xhc3M9XFwnZC1ibG9jayB1c2VyLXNlbGVjdC1ub25lXFwnIHdpZHRoPVxcJzEwMCVcXCcgaGVpZ2h0PVxcJzIwMFxcJyBhcmlhLWxhYmVsPVxcJ1BsYWNlaG9sZGVyOiBJbWFnZSBjYXBcXCcgZm9jdXNhYmxlPVxcJ2ZhbHNlXFwnIHJvbGU9XFwnaW1nXFwnIHByZXNlcnZlQXNwZWN0UmF0aW89XFwneE1pZFlNaWQgc2xpY2VcXCcgdmlld0JveD1cXCcwIDAgMzE4IDE4MFxcJyBzdHlsZT1cXCdmb250LXNpemU6MS4xMjVyZW07dGV4dC1hbmNob3I6bWlkZGxlXFwnPic7XG4gICAgICAgIGNhdGFsb2cgKz0gJzxkaXYgY2xhc3MgPSBcXCdjYXJkLWJvZHlcXCc+PHAgY2xhc3M9XFwnY2FyZC10ZXh0XFwnPicgKyBlbGVtZW50LnByb2R1Y3REZXNjcmlwdGlvbiArICc8L3A+PC9kaXY+JztcbiAgICAgICAgY2F0YWxvZyArPSAnPGRpdiBjbGFzcyA9IFxcJ2NhcmQtYm9keVxcJz48aDI+JyArIGVsZW1lbnQucHJpY2UgKyAnINCz0YDQvS48L2gyPjxwPicgKyBlbGVtZW50LndlaWdodCArICcg0LMuPC9wPjxoNj48L2Rpdj4nO1xuICAgICAgICBjYXRhbG9nICs9ICc8YnV0dG9uIHR5cGU9XFwnYnV0dG9uXFwnIGNsYXNzPVxcJ2J0biBidG4tZGFuZ2VyIGJ0bi1hZGQtdG8tY2FydFxcJyB0b3Zhck51bT1cXCcnICsgZWxlbWVudC5pZCArICdcXCc+0JIg0JrQvtGA0LfQuNC90YM8L2J1dHRvbj48L2Rpdj4nO1xuXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGNhdGFsb2c7XG59IiwiZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkX2NhcnQoKSB7XG4gICAgbGV0IGNhcnQgPSBgXG4gICAgPGRpdiBjbGFzcz1cImNhcnRcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZCBib3JkZXItcHJpbWFyeSBtYi0zXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1oZWFkZXJcIj5IZWFkZXI8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJvcmRlci1kaXNwbGF5X19vcmRlclwiPlxuICAgIGA7XG4gICAgbGV0IGJhc2UgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Byb2R1Y3RMaXN0JykpIHx8IFtdO1xuICAgIGxldCBhcnJheU51bSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkgfHwgW107XG4gICAgYmFzZS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICBpZiAoYXJyYXlOdW1bZWxlbWVudC5pZCAtIDFdICE9PSAwKSB7XG4gICAgICAgICAgICBjYXJ0ICs9ICc8ZGl2IGNsYXNzPVwib3JkZXJfX21haW4taW5mb1wiPjxkaXYgY2xhc3M9XCJvcmRlcl9fbG9nb1wiPjxpbWcgc3JjPVwiJyArIGVsZW1lbnQuaW1hZ2VzICsgYFwiIHdpZHRoPVwiMTUwcHhcIiBhbHQ9XCJcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcmRlcl9fZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcmRlcl9faW5mb3JtYXRpb25cIj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGgzPmArIGVsZW1lbnQucHJvZHVjdE5hbWUgKyBgPC9oMz5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPHA+YCArIGVsZW1lbnQucHJvZHVjdERlc2NyaXB0aW9uICsgYDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcmRlcl9fc2l6ZVwiPlxuICAgICAgICAgICAgICAgINCh0YLQsNC90LTQsNGA0YJcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXJfX2J1eVwiIGlkPVwicGl6emFzLjVcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXJfX3ByaWNlXCI+YCsgZWxlbWVudC5wcmljZSArIGA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXJfX2Ftb3VudC1wbHVzLW1pbnVzXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm9yZGVyX19hbW91bnQtbWludXMga2VrXCIgdG92YXJDb3VudCA9IFwiYCsgZWxlbWVudC5pZCArIGBcIj4tPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9yZGVyX19hbW91bnRcIj5gKyBhcnJheU51bVtlbGVtZW50LmlkIC0gMV0gKyBgXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm9yZGVyX19hbW91bnQtcGx1cyBrdWtcInRvdmFyQ291bnQgPSBcImArIGVsZW1lbnQuaWQgKyBgXCI+KzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PjwvZGl2PmA7XG4gICAgICAgIH1cbiAgICAgICBcbiAgICB9KTtcbiAgICBjYXJ0ICs9IGA8L2Rpdj48L2Rpdj48ZGl2Pjxmb3JtIGNsYXNzPVwib3JkZXJfX3JlZ2lzdHJhdGlvbi1ibGFua1wiPlxuICAgICAgICA8aDI+0J7RhNC+0YDQvNC70LXQvdC40LUg0LfQsNC60LDQt9CwPC9oMj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1fY2FydFwiPlxuICAgICAgICAgIFxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cIm5hbWVcIiBwbGFjZWhvbGRlcj1cItCY0LzRj1wiIHJlcXVpcmVkIHBhdHRlcm49XCIoW0EtWmEtel18W9CQLdCv0LAt0Y9dfFsgXSl7MiwyMH1cIj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJudW1iZXJcIiBwbGFjZWhvbGRlcj1cItCi0LXQu9C10YTQvtC9ICjQv9GALiAwOTY0NzcyNDMwKVwiIHJlcXVpcmVkIHBhdHRlcm49XCJbMF17MX1bMC05XXs5fVwiPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImVtYWlsXCIgcGxhY2Vob2xkZXI9XCJFLW1haWwgKGV4YW1wbGVAZ21haWwuY29tKVwiIHJlcXVpcmVkIHBhdHRlcm49XCIoW0EtWmEtel18WzAtOV0pezQsMjB9W0BdezF9W2Etel17MywxMH1bLl17MX1bYS16XXsyLDV9XCI+XG4gIFxuICAgICAgXG4gIFxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImNpdHlcIiBwbGFjZWhvbGRlcj1cItCT0L7RgNC+0LRcIiByZXF1aXJlZCBwYXR0ZXJuPVwiKFtBLVphLXpdfFvQkC3Qr9CwLdGPXXxb0JAt0K/QsC3QsF18WyBdKXs0LDIwfVwiPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cInN0cmVldFwiIHBsYWNlaG9sZGVyPVwi0KPQu9C40YbQsFwiIHJlcXVpcmVkIHBhdHRlcm49XCIoW0EtWmEtel18W9CQLdCv0LAt0Y9dfFsxLTldfFsgXSl7NCwyMH1cIj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJob3VzZVwiIHBsYWNlaG9sZGVyPVwi0JTQvtC8XCIgcmVxdWlyZWQgcGF0dGVybj1cIlsxLTldezEsM31cIj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJmbGF0XCIgcGxhY2Vob2xkZXI9XCLQmtCy0LDRgNGC0LjRgNCwICjQvdC10L7QsdGP0LcuKVwiIHBhdHRlcm49XCJbMS05XXsxLDR9XCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImVudHJhbmNlXCIgcGxhY2Vob2xkZXI9XCLQn9C+0LTRitC10LfQtCAo0L3QtdC+0LHRj9C3LilcIiBwYXR0ZXJuPVwiWzEtOV17MSwyfVwiPlxuICBcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImRhdGVcIiBwbGFjZWhvbGRlcj1cItCU0LDRgtCwICjQtNC0LtC80LwpXCIgcmVxdWlyZWQgcGF0dGVybj1cIlswLTldezJ9Wy5dezF9WzAtOV17Mn1cIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwidGltZVwiIHBsYWNlaG9sZGVyPVwi0JLRgNC10LzRjyAo0YfRhzrQvNC8KVwiIHJlcXVpcmVkIHBhdHRlcm49XCJbMC05XXsyfVs6XXsxfVswLTldezJ9XCI+XG4gIFxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIl9wYXltZW50XCI+XG4gICAgICAgICAgICA8aDIgY2xhc3M9XCJwYXktdGl0bGVcIj7QntC/0LvQsNGC0LA8L2gyPlxuICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cImN1c3RvbS1zZWxlY3RcIiBpZCA9IFwicGF5bWVudF9zZWxlY3RcIj5cbiAgICAgICAgICAgIDxvcHRpb24+0J3QsNC70LjRh9C90YvQtTwvb3B0aW9uPlxuICAgICAgICAgICAgPG9wdGlvbj7QmtCw0YDRgtCwPC9vcHRpb24+XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgPjxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIj7Ql9Cw0LrQsNC30LDRgtGMPC9idXR0b24+PC9kaXY+XG4gIFxuICAgIDwvZm9ybT48L2Rpdj48L2Rpdj5gO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5rZWsnKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCcxJyk7XG4gICAgICAgICAgICBkZWNyZWFzZShpdGVtLmdldEF0dHJpYnV0ZSgndG92YXJDb3VudCcpKTsgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9KTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcua3VrJykuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGluY3JlYXNlKGl0ZW0uZ2V0QXR0cmlidXRlKCd0b3ZhckNvdW50JykpOyBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0uZ2V0QXR0cmlidXRlKCd0b3ZhckNvdW50JykpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgfSk7XG5cbiAgICByZXR1cm4gY2FydDtcblxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkX3RvX2NhcnQoaWQpIHtcbiAgICBsZXQgYmFzZSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncHJvZHVjdExpc3QnKSkgfHwgW107XG4gICAgbGV0IGFycmF5TnVtID0gW107XG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykgPT09IG51bGwpIHtcbiAgICAgICAgYmFzZS5mb3JFYWNoKCgpID0+IHtcbiAgICAgICAgICAgIGFycmF5TnVtLnB1c2goMCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcblxuXG4gICAgICAgIGFycmF5TnVtID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKSB8fCBbXTtcbiAgICB9XG5cbiAgICBhcnJheU51bVtpZCAtIDFdICs9IDE7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnQnLCBKU09OLnN0cmluZ2lmeShhcnJheU51bSkpO1xuICAgIHVwZGF0ZUNhcnRDb3VudCgpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUNhcnRDb3VudCgpIHtcbiAgICBsZXQgYmFzZSA9IFtdO1xuICAgIGJhc2UgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpIHx8IFtdO1xuICAgIGxldCBjb3VudCA9IGJhc2UucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcnQtY291bnQnKS5pbm5lckhUTUwgPSBjb3VudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluY3JlYXNlKGlkKSB7XG4gICAgbGV0IGFycmF5TnVtID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKSB8fCBbXTtcbiAgICBsZXQgaWRpbnQgPSBwYXJzZUludChpZCk7XG4gICAgXG4gICAgYXJyYXlOdW1baWRpbnQgLSAxXSArPSAxO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkoYXJyYXlOdW0pKTtcbiAgICB1cGRhdGVDYXJ0Q291bnQoKTtcbiAgICBjb25zdCByb290RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTtcbiAgICByb290RGl2LmlubmVySFRNTCA9IGJ1aWxkX2NhcnQoKTtcblxufVxuZXhwb3J0IGZ1bmN0aW9uIGRlY3JlYXNlKGlkKSB7XG4gICAgbGV0IGFycmF5TnVtID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKSB8fCBbXTtcbiAgICBsZXQgaWRpbnQgPSBwYXJzZUludChpZCk7XG4gICAgYXJyYXlOdW1baWRpbnQgLSAxXSAtPSAxO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkoYXJyYXlOdW0pKTtcbiAgICB1cGRhdGVDYXJ0Q291bnQoKTtcbiAgICBjb25zdCByb290RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTtcbiAgICByb290RGl2LmlubmVySFRNTCA9IGJ1aWxkX2NhcnQoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFNlbmRPcmRlcigpIHtcbiAgICBsZXQgb3JkZXIgPSB7XG4gICAgICAgIGNhcnQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JyksXG4gICAgICAgIG5hbWU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lJykudmFsdWUsXG4gICAgICAgIG51bWJlcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ251bWJlcicpLnZhbHVlLFxuICAgICAgICBlbWFpbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsJykudmFsdWUsXG4gICAgICAgIGNpdHk6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaXR5JykudmFsdWUsXG4gICAgICAgIHN0cmVldDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0cmVldCcpLnZhbHVlLFxuICAgICAgICBob3VzZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvdXNlJykudmFsdWUsXG4gICAgICAgIGZsYXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGF0JykudmFsdWUsXG4gICAgICAgIGVudHJhbmNlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50cmFuY2UnKS52YWx1ZSxcbiAgICAgICAgZGF0ZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGUnKS52YWx1ZSxcbiAgICAgICAgdGltZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUnKS52YWx1ZSxcbiAgICAgICAgcGF5bWVudF9zZWxlY3Q6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXltZW50X3NlbGVjdCcpLnZhbHVlXG4gICAgfTtcbiAgICBzZXREYXRhKG9yZGVyKTtcbiAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjb3JkZXInO1xuICAgIGNvbnN0IHJvb3REaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpO1xuICAgIHJvb3REaXYuaW5uZXJIVE1MID0gb3JkZXJDcmVhdGVkKG9yZGVyKTtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcblxufVxuXG5leHBvcnQgZnVuY3Rpb24gb3JkZXJDcmVhdGVkKG9yZGVyKSB7XG4gICAgbGV0IGNhcnQgPSBgXG4gICAgPGRpdiBjbGFzcz1cImNhcnRcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZCBib3JkZXItcHJpbWFyeSBtYi0zXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1oZWFkZXJcIj5IZWFkZXI8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJvcmRlci1kaXNwbGF5X19vcmRlclwiPlxuICAgIGA7XG4gICAgbGV0IGJhc2UgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Byb2R1Y3RMaXN0JykpIHx8IFtdO1xuICAgIGxldCBhcnJheU51bSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkgfHwgW107XG4gICAgYmFzZS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICBpZiAoYXJyYXlOdW1bZWxlbWVudC5pZCAtIDFdICE9PSAwKSB7XG4gICAgICAgICAgICBjYXJ0ICs9ICc8ZGl2IGNsYXNzPVwib3JkZXJfX21haW4taW5mb1wiPjxkaXYgY2xhc3M9XCJvcmRlcl9fbG9nb1wiPjxpbWcgc3JjPVwiJyArIGVsZW1lbnQuaW1hZ2VzICsgYFwiIHdpZHRoPVwiMTUwcHhcIiBhbHQ9XCJcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcmRlcl9fZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcmRlcl9faW5mb3JtYXRpb25cIj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGgzPmArIGVsZW1lbnQucHJvZHVjdE5hbWUgKyBgPC9oMz5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPHA+YCArIGVsZW1lbnQucHJvZHVjdERlc2NyaXB0aW9uICsgYDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcmRlcl9fc2l6ZVwiPlxuICAgICAgICAgICAgICAgINCh0YLQsNC90LTQsNGA0YJcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXJfX2J1eVwiIGlkPVwicGl6emFzLjVcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXJfX3ByaWNlXCI+YCsgZWxlbWVudC5wcmljZSArIGA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXJfX2Ftb3VudC1wbHVzLW1pbnVzXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9yZGVyX19hbW91bnRcIj5gKyBhcnJheU51bVtlbGVtZW50LmlkIC0gMV0gKyBgXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+PC9kaXY+YDtcbiAgICAgICAgfVxuXG5cbiAgICB9KTtcbiAgICBjYXJ0ICs9IGA8L2Rpdj48L2Rpdj48ZGl2PlxuICAgIDxwPk5hbWU6YCsgb3JkZXIubmFtZSArIGA8L3A+XG4gICAgPHA+TnVtYmVyOmArIG9yZGVyLm51bWJlciArIGA8L3A+XG4gICAgPHA+RW1haWw6YCsgb3JkZXIuZW1haWwgKyBgPC9wPlxuICAgIDxwPkNpdHk6YCsgb3JkZXIuY2l0eSArIGA8L3A+XG4gICAgPHA+U3RyZWV0OmArIG9yZGVyLnN0cmVldCArIGA8L3A+XG4gICAgPHA+SG91c2U6YCsgb3JkZXIuaG91c2UgKyBgPC9wPlxuICAgIDxwPkZsYXQ6YCsgb3JkZXIuZmxhdCArIGA8L3A+XG4gICAgPHA+RW50cmFuY2U6YCsgb3JkZXIuZW50cmFuY2UgKyBgPC9wPlxuICAgIDxwPkRhdGU6YCsgb3JkZXIuZGF0ZSArIGA8L3A+XG4gICAgPHA+VGltZTpgKyBvcmRlci50aW1lICsgYDwvcD5cbiAgICA8cD5QYXltZW50OmArIG9yZGVyLnBheW1lbnRfc2VsZWN0ICsgYDwvcD5cbiAgICA8L2Rpdj48L2Rpdj5gO1xuICAgIHJldHVybiBjYXJ0O1xufVxuYXN5bmMgZnVuY3Rpb24gc2V0RGF0YShvcmRlcikge1xuXG4gICAgcmV0dXJuIGF3YWl0IGZldGNoKCdodHRwczovL215LWpzb24tc2VydmVyLnR5cGljb2RlLmNvbS9WaXN1YWxYMi9PS1JMQUJBNC9vZmZlcnMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcmRlcilcbiAgICB9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygneWF5Jyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnZXJyb3InO1xuICAgICAgICB9XG4gICAgfSk7XG59IiwiaW1wb3J0ICogYXMgeWF5IGZyb20gJy4vZ2V0ZGF0YS5qcyc7XG5pbXBvcnQgKiBhcyBnZW5NIGZyb20gJy4vbWFpbi5qcyc7XG5pbXBvcnQgKiBhcyBnZW5DIGZyb20gJy4vY2F0YWxvZy5qcyc7XG5pbXBvcnQgKiBhcyBnZW5BIGZyb20gJy4vYWN0aW9ucy5qcyc7XG5pbXBvcnQgKiBhcyBnZW5EUCBmcm9tICcuL2RldGFpbGVkUGl6emEuanMnO1xuaW1wb3J0ICogYXMgZ2VuREEgZnJvbSAnLi9kZXRhaWxlZEFjdGlvbi5qcyc7XG5pbXBvcnQgKiBhcyBnZW5DYXJ0IGZyb20gJy4vY2FydC5qcyc7XG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xuICAgIHlheS5sb2FkUGFnZSgpO1xuICAgIGdlbkNhcnQudXBkYXRlQ2FydENvdW50KCk7XG4gICAgcm91dGUoKTtcbn07XG53aW5kb3cub25wb3BzdGF0ZSA9ICgpID0+IHtcbiAgICBnZW5DYXJ0LnVwZGF0ZUNhcnRDb3VudCgpO1xuICAgIHJvdXRlKCk7XG5cbn07XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWNhcnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjY2FydCc7XG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJvdXRlKCkge1xuICAgIGNvbnN0IHJvb3REaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpO1xuICAgIGlmICh0ZXN0QUJJbnQod2luZG93LmxvY2F0aW9uLmhhc2gpICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNwbGl0KCcvJylbMF0gPT09ICcjY2F0YWxvZycpIHtcbiAgICAgICAgcm9vdERpdi5pbm5lckhUTUwgPSBnZW5EUC5wYWdlRGV0YWlsZWQod2luZG93LmxvY2F0aW9uLmhhc2gpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnRuLWFkZC10by1jYXJ0JykuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZ2VuQ2FydC5hZGRfdG9fY2FydChpdGVtLmdldEF0dHJpYnV0ZSgndG92YXJOdW0nKSk7IFxuICAgICAgICAgICAgfSk7XG4gICAgICBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCF0ZXN0QUJJbnQod2luZG93LmxvY2F0aW9uLmhhc2gpICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNwbGl0KCcvJylbMF0gPT09ICcjY2F0YWxvZycpIHtcbiAgICAgICAgcm9vdERpdi5pbm5lckhUTUwgPSBnZW5DLmdlbmVyYXRlQ2F0YWxvZygpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnRuLWFkZC10by1jYXJ0JykuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZ2VuQ2FydC5hZGRfdG9fY2FydChpdGVtLmdldEF0dHJpYnV0ZSgndG92YXJOdW0nKSk7IFxuICAgICAgICAgICAgfSk7XG4gICAgICBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRlc3RBQkludCh3aW5kb3cubG9jYXRpb24uaGFzaCkgJiYgd2luZG93LmxvY2F0aW9uLmhhc2guc3BsaXQoJy8nKVswXSA9PT0gJyNhY3Rpb25zJykge1xuICAgICAgICByb290RGl2LmlubmVySFRNTCA9IGdlbkRBLnBhZ2VEZXRhaWxlZEFjdGlvbih3aW5kb3cubG9jYXRpb24uaGFzaCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoID09PSAnJyB8fCB3aW5kb3cubG9jYXRpb24uaGFzaCA9PT0gJyMnKSB7XG4gICAgICAgIHJvb3REaXYuaW5uZXJIVE1MID0gZ2VuTS5nZW5lcmF0ZU1haW4oKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ0bi1hZGQtdG8tY2FydCcpLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGdlbkNhcnQuYWRkX3RvX2NhcnQoaXRlbS5nZXRBdHRyaWJ1dGUoJ3RvdmFyTnVtJykpOyBcbiAgICAgICAgICAgIH0pO1xuICAgICAgXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICghdGVzdEFCSW50KHdpbmRvdy5sb2NhdGlvbi5oYXNoKSAmJiB3aW5kb3cubG9jYXRpb24uaGFzaC5zcGxpdCgnLycpWzBdID09PSAnI2FjdGlvbnMnKSB7XG4gICAgICAgIHJvb3REaXYuaW5uZXJIVE1MID0gZ2VuQS5nZW5lcmF0ZUFjdGlvbnMoKTtcbiAgICB9XG4gICAgXG4gICAgZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLmhhc2ggPT09ICcjY2FydCcpIHtcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcm9vdERpdi5pbm5lckhUTUwgPSBnZW5DYXJ0LmJ1aWxkX2NhcnQoKTtcbiAgICAgIFxuICAgICAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdmb3JtJylbMF07XG4gICAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldmVudCkge1xuXG5cbiAgICAgICAgICAgICAgICBpZiAoIWZvcm0uY2hlY2tWYWxpZGl0eSgpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGdlbkNhcnQuU2VuZE9yZGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0ZXN0QUJJbnQoc3RyaW5nKSB7XG4gICAgdmFyIG1hdGNoID0gc3RyaW5nLm1hdGNoKC9bMC05XSQvKTtcbiAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFswXSA6ICcnO1xufVxuXG5cblxuXG5cblxuIiwiZXhwb3J0IGZ1bmN0aW9uIHBhZ2VEZXRhaWxlZChsZWwpIHtcbiAgICBsZWwgPSBsZWwucmVwbGFjZSgvXFxEL2csICcnKTtcbiAgICBsZXQgYmFzZSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncHJvZHVjdExpc3QnKSkgfHwgW107XG4gICAgbGV0IG5lZWRlZCA9IGJhc2VbbGVsIC0gMV07XG4gICAgaWYgKHR5cGVvZiBiYXNlW2xlbCAtIDFdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjJztcbiAgICB9XG4gICAgbGV0IHV3dSA9ICcnO1xuICAgIHV3dSArPSAnPGRpdiBzdHlsZSA9IFwiZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsgZ3JpZC1jb2x1bW4tZ2FwOiAxMHB4O1wiPjxkaXY+PGltZyBzdHlsZSA9IFwibWF4LXdpZHRoOiA0MDBweDtcIiBzcmMgPSBcXCcnICsgbmVlZGVkLmltYWdlcyArICdcXCcgY2xhc3M9XFwnZC1ibG9jayB1c2VyLXNlbGVjdC1ub25lXFwnIHN0eWxlID0gXCJtYXJnaW4tbGVmdDogMTBweDsgbWluLXdpZHRoOiA0MDBweDtcIiAgYXJpYS1sYWJlbD1cXCdQbGFjZWhvbGRlcjogSW1hZ2UgY2FwXFwnIGZvY3VzYWJsZT1cXCdmYWxzZVxcJyByb2xlPVxcJ2ltZ1xcJyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVxcJ3hNaWRZTWlkIHNsaWNlXFwnIHZpZXdCb3g9XFwnMCAwIDMxOCAxODBcXCcgc3R5bGU9XFwnZm9udC1zaXplOjEuMTI1cmVtO3RleHQtYW5jaG9yOm1pZGRsZVxcJz48L2Rpdj48ZGl2PjxoMT4nICsgbmVlZGVkLnByb2R1Y3ROYW1lICsgJzwvaDE+PHA+JyArIG5lZWRlZC5wcm9kdWN0RGVzY3JpcHRpb24gKyAnPC9wPjxoND4nICsgbmVlZGVkLndlaWdodCArICcg0LPRgDwvaDQ+PGgzPicgKyBuZWVkZWQucHJpY2UgKyAnINCz0YDQvTwvaDM+PGJ1dHRvbiB0eXBlPVxcJ2J1dHRvblxcJyBjbGFzcz1cXCdidG4gYnRuLWRhbmdlciBidG4tYWRkLXRvLWNhcnRcXCcgdG92YXJOdW09XFwnJyArIG5lZWRlZC5pZCArICdcXCc+0JIg0JrQvtGA0LfQuNC90YM8L2J1dHRvbj48L2Rpdj48L2Rpdj4nO1xuXG4gICAgcmV0dXJuIHV3dTtcbn0iLCJleHBvcnQgZnVuY3Rpb24gcGFnZURldGFpbGVkQWN0aW9uKGxlbCkge1xuICAgIGxlbCA9IGxlbC5yZXBsYWNlKC9cXEQvZywgJycpO1xuICAgIGxldCBiYXNlID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY3Rpb25MaXN0JykpIHx8IFtdO1xuICAgIGxldCBuZWVkZWQgPSBiYXNlW2xlbCAtIDFdO1xuICAgIGlmKHR5cGVvZiBiYXNlW2xlbCAtIDFdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjJztcbiAgICB9XG4gICAgbGV0IHV3dSA9ICcnO1xuICAgIHV3dSArPSAnPGRpdiBzdHlsZSA9IFwiZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsgZ3JpZC1jb2x1bW4tZ2FwOiAxMHB4O1wiPjxkaXY+PGltZyBzdHlsZSA9IFwibWF4LXdpZHRoOiA0MDBweDtcIiBzcmMgPSBcXCcnICsgbmVlZGVkLmltYWdlcyArICdcXCcgY2xhc3M9XFwnZC1ibG9jayB1c2VyLXNlbGVjdC1ub25lXFwnIHN0eWxlID0gXCJtYXJnaW4tbGVmdDogMTBweDsgbWluLXdpZHRoOiA0MDBweDtcIiAgYXJpYS1sYWJlbD1cXCdQbGFjZWhvbGRlcjogSW1hZ2UgY2FwXFwnIGZvY3VzYWJsZT1cXCdmYWxzZVxcJyByb2xlPVxcJ2ltZ1xcJyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVxcJ3hNaWRZTWlkIHNsaWNlXFwnIHZpZXdCb3g9XFwnMCAwIDMxOCAxODBcXCcgc3R5bGU9XFwnZm9udC1zaXplOjEuMTI1cmVtO3RleHQtYW5jaG9yOm1pZGRsZVxcJz48L2Rpdj48ZGl2PjxoMT4nICsgbmVlZGVkLmFjdGlvbk5hbWUgKyAnPC9oMT48cD4nICsgbmVlZGVkLmFjdGlvbkRlc2NyaXB0aW9uICsgJzwvcD48L2Rpdj48L2Rpdj4nO1xuICAgIHJldHVybiB1d3U7XG59IiwiZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlTWFpbigpIHtcbiAgICBsZXQgYmFzZW1hID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdwcm9kdWN0TGlzdCcpKSB8fCBbXTtcbiAgICBsZXQgYmFzZWFjbWEgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjdGlvbkxpc3QnKSkgfHwgW107XG4gICAgbGV0IG1haW4gPSBgXG48aDE+TUFJTjwvaDE+XG48ZGl2IGNsYXNzID0gXCJqdW1ib3Ryb25cIj5cbjxoMT5BY3Rpb25zPC9oMT5cbjxkaXYgaWQgPSBcImFjdGlvbnNcIiBjbGFzcyA9IFwicGl6emFzX2NhdGVnb3J5XCI+XG5gO1xuICAgIGJhc2VhY21hLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIG1haW4gKz0gJzxkaXYgY2xhc3MgPSBcImNhcmQgYm9yZGVyLXNlY29uZGFyeSBtYi0zXCIgc3R5bGUgPSBcIndpZHRoOiAzNTBweDtcIj4nO1xuXG4gICAgICAgIG1haW4gKz0gJzxkaXYgY2xhc3MgPSBcXCdjYXJkLWJvZHlcXCc+PGg1IGNsYXNzID0gXFwnY2FyZC10aXRsZVxcJz4nICsgZWxlbWVudC5hY3Rpb25OYW1lICsgJzwvaDU+PC9kaXY+JztcbiAgICAgICAgbWFpbiArPSAnPGltZyBzcmMgPSBcXCcnICsgZWxlbWVudC5pbWFnZXMgKyAnXFwnIG9uY2xpY2s9XCJyZXR1cm4gbG9jYXRpb24uaHJlZiA9IFxcJyNhY3Rpb25zLycgKyBlbGVtZW50LmlkICsgJ1xcJ1wiIGNsYXNzPVxcJ2QtYmxvY2sgdXNlci1zZWxlY3Qtbm9uZVxcJyB3aWR0aD1cXCcxMDAlXFwnIGhlaWdodD1cXCcyMDBcXCcgYXJpYS1sYWJlbD1cXCdQbGFjZWhvbGRlcjogSW1hZ2UgY2FwXFwnIGZvY3VzYWJsZT1cXCdmYWxzZVxcJyByb2xlPVxcJ2ltZ1xcJyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVxcJ3hNaWRZTWlkIHNsaWNlXFwnIHZpZXdCb3g9XFwnMCAwIDMxOCAxODBcXCcgc3R5bGU9XFwnZm9udC1zaXplOjEuMTI1cmVtO3RleHQtYW5jaG9yOm1pZGRsZVxcJz4nO1xuICAgICAgICBtYWluICs9ICc8ZGl2IGNsYXNzID0gXFwnY2FyZC1ib2R5XFwnPjxwIGNsYXNzPVxcJ2NhcmQtdGV4dFxcJz4nICsgZWxlbWVudC5hY3Rpb25EZXNjcmlwdGlvbiArICc8L3A+PC9kaXY+JztcbiAgICAgICAgbWFpbiArPSAnPGJ1dHRvbiB0eXBlPVxcJ2J1dHRvblxcJyBjbGFzcz1cXCdidG4gYnRuLWRhbmdlclxcJyBvbmNsaWNrPVwicmV0dXJuIGxvY2F0aW9uLmhyZWYgPSBcXCcjYWN0aW9ucy8nICsgZWxlbWVudC5pZCArICdcXCdcIj5EZXRhaWxzPC9idXR0b24+PC9kaXY+JztcblxuICAgIH0pO1xuXG4gICAgbWFpbiArPSBgPC9kaXY+XG48aDE+QmVzdCBwaXp6YTwvaDE+XG48ZGl2IGlkID0gXCJiZXN0X3BpenphXCIgY2xhc3MgPSBcInBpenphc19jYXRlZ29yeVwiPlxuYDtcbiAgICBtYWluICs9IGJ1aWxkX2NhdGVnb3J5X21haW4oYmFzZW1hLmZpbHRlcihlbGVtZW50ID0+IGVsZW1lbnQucmVjb21tZW5kZWQgPT0gdHJ1ZSkgfHwgW10pO1xuICAgIHJldHVybiBtYWluO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkX2NhdGVnb3J5X21haW4odXd1KSB7XG4gICAgbGV0IG1haW4gPSAnICc7XG4gICAgdXd1LmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIG1haW4gKz0gJzxkaXYgY2xhc3MgPSBcImNhcmQgYm9yZGVyLXNlY29uZGFyeSBtYi0zXCIgc3R5bGUgPSBcIndpZHRoOiAzNTBweDtcIj4nO1xuXG4gICAgICAgIG1haW4gKz0gJzxkaXYgY2xhc3MgPSBcXCdjYXJkLWJvZHlcXCc+PGg1IGNsYXNzID0gXFwnY2FyZC10aXRsZVxcJz4nICsgZWxlbWVudC5wcm9kdWN0TmFtZSArICc8L2g1PjwvZGl2Pic7XG4gICAgICAgIG1haW4gKz0gJzxpbWcgc3JjID0gXFwnJyArIGVsZW1lbnQuaW1hZ2VzICsgJ1xcJyBvbmNsaWNrPVwicmV0dXJuIGxvY2F0aW9uLmhyZWYgPSBcXCcjY2F0YWxvZy8nICsgZWxlbWVudC5pZCArICdcXCdcIiBjbGFzcz1cXCdkLWJsb2NrIHVzZXItc2VsZWN0LW5vbmVcXCcgd2lkdGg9XFwnMTAwJVxcJyBoZWlnaHQ9XFwnMjAwXFwnIGFyaWEtbGFiZWw9XFwnUGxhY2Vob2xkZXI6IEltYWdlIGNhcFxcJyBmb2N1c2FibGU9XFwnZmFsc2VcXCcgcm9sZT1cXCdpbWdcXCcgcHJlc2VydmVBc3BlY3RSYXRpbz1cXCd4TWlkWU1pZCBzbGljZVxcJyB2aWV3Qm94PVxcJzAgMCAzMTggMTgwXFwnIHN0eWxlPVxcJ2ZvbnQtc2l6ZToxLjEyNXJlbTt0ZXh0LWFuY2hvcjptaWRkbGVcXCc+JztcbiAgICAgICAgbWFpbiArPSAnPGRpdiBjbGFzcyA9IFxcJ2NhcmQtYm9keVxcJz48cCBjbGFzcz1cXCdjYXJkLXRleHRcXCc+JyArIGVsZW1lbnQucHJvZHVjdERlc2NyaXB0aW9uICsgJzwvcD48L2Rpdj4nO1xuICAgICAgICBtYWluICs9ICc8ZGl2IGNsYXNzID0gXFwnY2FyZC1ib2R5XFwnPjxoMj4nICsgZWxlbWVudC5wcmljZSArICcg0LPRgNC9LjwvaDI+PHA+JyArIGVsZW1lbnQud2VpZ2h0ICsgJyDQsy48L3A+PGg2PjwvZGl2Pic7XG4gICAgICAgIG1haW4gKz0gJzxidXR0b24gdHlwZT1cXCdidXR0b25cXCcgY2xhc3M9XFwnYnRuIGJ0bi1kYW5nZXIgYnRuLWFkZC10by1jYXJ0XFwnIHRvdmFyTnVtPVxcJycgKyBlbGVtZW50LmlkICsgJ1xcJz7QkiDQmtC+0YDQt9C40L3RgzwvYnV0dG9uPjwvZGl2Pic7XG5cbiAgICB9KTtcbiAgICByZXR1cm4gbWFpbjtcbn0iLCJleHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVBY3Rpb25zKCl7XG4gICAgbGV0IGJhc2VhY3QgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjdGlvbkxpc3QnKSl8fFtdO1xuICAgIGxldCBhY3Rpb25zID0gYFxuPGgxPkFjdGlvbnMuPC9oMT5cbjxkaXYgY2xhc3MgPSBcImp1bWJvdHJvblwiPlxuYDtcblxuICAgIGJhc2VhY3QuZm9yRWFjaCAoZWxlbWVudCA9PiB7XG4gICAgICAgIGFjdGlvbnMgKz0gYFxuICAgICAgICA8ZGl2IGlkID0gXCJhY3Rpb25cIiBjbGFzcyA9IFwiYWN0aW9uc19tYWluX19lbGVtZW50XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb25zX2xvZ29cIj48aW1nIHN0eWxlID0gXCJtYXgtd2lkdGg6IDQwMHB4O1wiIHNyYz1cImArZWxlbWVudC5pbWFnZXMrYFwiIGFsdD1cIlwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYWN0aW9uc19kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8cD5gK2VsZW1lbnQuZGF0ZStgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8cD48ZW0+YCtlbGVtZW50LmFjdGlvbk5hbWUrYDwvZW0+PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cD5gK2VsZW1lbnQuYWN0aW9uRGVzY3JpcHRpb24rYDwvcD5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIiBvbmNsaWNrPVwicmV0dXJuIGxvY2F0aW9uLmhyZWYgPSAnI2FjdGlvbnMvYCsgZWxlbWVudC5pZCArYCdcIj7QlNC10YLQsNC70Lg8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7ICAgICBcbiAgICB9KTtcblxuICAgIGFjdGlvbnMgKz0gJzwvZGl2Pic7XG4gICAgcmV0dXJuIGFjdGlvbnM7XG59XG5cblxuXG4iLCJleHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGF0YUNhdGFsb2coKSB7XG4gICAgbGV0IHByb2R1Y3RzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vbXktanNvbi1zZXJ2ZXIudHlwaWNvZGUuY29tL1Zpc3VhbFgyL09LUkxBQkE0L3Byb2R1Y3RzJykudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xuICAgIHByb2R1Y3RzID0gSlNPTi5zdHJpbmdpZnkocHJvZHVjdHMpO1xuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3Byb2R1Y3RMaXN0JywgcHJvZHVjdHMpO1xuICAgIGxldCBhY3Rpb25zID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vbXktanNvbi1zZXJ2ZXIudHlwaWNvZGUuY29tL1Zpc3VhbFgyL09LUkxBQkE0L2FjdGlvbnMnKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgYWN0aW9ucyA9IEpTT04uc3RyaW5naWZ5KGFjdGlvbnMpO1xuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2FjdGlvbkxpc3QnLCBhY3Rpb25zKTtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG59XG5hc3luYyBmdW5jdGlvbiBnZXREYXRhQ2F0YWxvZ19XUigpIHtcbiAgICBsZXQgcHJvZHVjdHMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9teS1qc29uLXNlcnZlci50eXBpY29kZS5jb20vVmlzdWFsWDIvT0tSTEFCQTQvcHJvZHVjdHMnKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgcHJvZHVjdHMgPSBKU09OLnN0cmluZ2lmeShwcm9kdWN0cyk7XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgncHJvZHVjdExpc3QnLCBwcm9kdWN0cyk7XG4gICAgbGV0IGFjdGlvbnMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9teS1qc29uLXNlcnZlci50eXBpY29kZS5jb20vVmlzdWFsWDIvT0tSTEFCQTQvYWN0aW9ucycpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKTtcbiAgICBhY3Rpb25zID0gSlNPTi5zdHJpbmdpZnkoYWN0aW9ucyk7XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnYWN0aW9uTGlzdCcsIGFjdGlvbnMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRQYWdlKCl7XG4gICAgaWYoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncHJvZHVjdExpc3QnKSA9PT0gbnVsbCB8fCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY3Rpb25MaXN0JykgPT09IG51bGwgKXtcbiAgICAgICAgZ2V0RGF0YUNhdGFsb2coKTtcbiAgICBcbiAgICB9IFxuICAgIGVsc2V7XG4gICAgICAgIGdldERhdGFDYXRhbG9nX1dSKCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRfY2FydCgpXG57XG4gICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSAhPT0gbnVsbCl7XG4gICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSAnI2NhcnQnO1xuICAgIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9